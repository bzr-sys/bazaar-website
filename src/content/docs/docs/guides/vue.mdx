---
title: Vue.js
---

import { Steps, Aside } from "@astrojs/starlight/components";

In this guide, you will create a todo app in Vue.js with features to add, display, mark as complete, and delete tasks.

## Prerequisites

- Some experience with Vue.js
- Node and NPM
- GitHub account (if you want to deploy your app)
- Netlify account (if you want to deploy your app)

## Creating a New Vue Project

Create new Vue project:

```bash
npm create vue@latest
```

Choose a project name. I am using `bazaar-vue-todo`.

Then, answer the following prompts, choosing `yes` for TypeScript and no the the remaining options. You can anwser `yes` to whatever you like, but the other options aren't necessary for this guide.

```bash
Add TypeScript? › Yes
Add JSX Support? › No
Add Vue Router for Single Page Application development? No
Add Pinia for state management? No
Add Vitest for Unit Testing? No
Add an End-to-End Testing Solution? No
Add ESLint for code quality? No
Add Vue DevTools 7 extension for debugging? (experimental) No
```

You can choose `yes` to any prompt, though only TypesScript is needed for this guide.

After answering all prompts, you'll see the following output:

```bash title="Output"
Scaffolding project in /<your-path>/bazaar-vue-todo...

Done. Now run:

  cd bazaar-vue-todo
  npm install
  npm run dev
```

<Aside>
  At the time of writing, `npm create vue@latest` installed Vue `3.4.29`.
</Aside>

Run those three commands and check out the starter Vue project in your browser. The default URL is `http://localhost:5173/`. You'll see the Vue starter app, `You did it! You've successfully created a project with Vite + Vue 3.`

## Preparing the Starter Project

Open the Vue project in your code editor.

Before you start building your todo app, clean up the newly created Vue project by removing some default files and folders, replacing the default CSS, and stripping unnecessary code from `App.vue`.

<Steps>

1. Delete unnecessary files from the Vue starter project:

   - `src/components/*`
   - `src/assets/base.css`
   - `src/assets/logo.svg`

2. Add CSS:

   Open up `assets/main.css` and replace its contents with the following styles:

   ```css title="main.css"
   body {
     font-family: sans-serif;
   }

   .container {
     margin: 0 auto;
     max-width: 600px;
     padding: 3em 0;
   }

   .card {
     background-color: #eee;
     padding: 1rem;
   }

   .todo-form {
     margin: 2rem 0;
   }

   .todos {
     display: flex;
     flex-direction: column;
     gap: 1rem;
   }

   .todo-text {
     margin-bottom: 1rem;
   }

   .strikethrough {
     text-decoration: line-through;
   }
   ```

3. Prepare `App.vue`:

   Next, Open up `src/App.vue` and replace its contents with the following:

   ```vue title="App.vue"
   <script setup lang="ts">
   // Todo logic will be implemented here
   </script>

   <template>
     <div class="container">
       <h1>Todo</h1>
       <!-- Todo template content will be implemented here -->
     </div>
   </template>

   <style scoped></style>
   ```

</Steps>

Now, if you check your app in the browser again, you'll see the text, **Todo**.

## Initializing a Bazaar Client

```bash
npm install @bzr/bazaar
```

In `src/App.vue`, at the start of `<script setup lang="ts">`, initalize the Bazaar library. Replace the comment, `// Todo logic will be implemented here`, with the following:

```vue title="App.vue"
<script setup lang="ts">
import { BazaarApp } from "@bzr/bazaar";

const bzr = new BazaarApp({
  appId: "test",
  loginRedirectUri: window.location.href,
  onApiConnectError: async (bzr) => bzr.logOut(),
});

// Test the client initialization by checking the logged in status
console.log("is logged in:", bzr.isLoggedIn());
</script>
```

TODO Explain onApiConnectError.

TODO this config will use the mock server `bazaarUri` in when `process.env.NODE_ENV` is `development`.

You'll see the following in your web browser's developer tools console:

```log title="Developer Console"
is logged in: false
```

## Developing Locally

For local development, we recommend you use the Bazaar mock server. If your Vue app is running on the default Vite dev server port, `http://localhost:5173/`, then run the mock server in a new terminal tab specifying its port:

```bash
npx @bzr/bazaar-mock -u http://localhost:5173/
```

If you omit the `-u` option the mock server defaults to port `8080`.

You'll be prompted to install the `@bzr/bazaar-mock` NPM package if you haven't done so before.

```bash title="Output"
Running mock Bazaar server at: http://localhost:3377

App ID is test
App URL is http://localhost:5173/
Redirect URIs are http://localhost:5173/
Use any email to sign up / log in. Code is always 1234
```

The Bazaar mock server is running. Next, add user authentication.

## Adding User Authentication

In this step, you'll add user authentication and login event handling.

Add log in and log out buttons:

```vue title="App.vue" del={4} ins={5,6}
<template>
  <div class="container">
    <h1>Todo</h1>
    <!-- Todo template content will be implemented here -->
    <button @click="bzr.login">Log in</button>
    <button @click="bzr.logOut">Log out</button>
  </div>
</template>
```

When you click the button a login pop-up window will open. Log in using the code `1234` and whatever other info you like.

After you login the the pop-up closes, refresh the page and you'll see:

```log title="Developer Console"
is logged in: true
```

<Aside>
  The `bzr.logOut` method deletes an access token from local storage and
  performs a page refresh.
</Aside>

Next, refactor the login code so that the login status updates immediately after a successful login, not just on page load.

```vue title="App.vue" del={4,5} ins={6-16}
<script setup lang="ts">
...

// Test the client initialization by checking the logged in status
console.log("is logged in:", bzr.isLoggedIn());
async function doLoginActions() {
  console.log("is logged in:", bzr.isLoggedIn());
}

// Perform login actions if the user is already logged in on page load
if (bzr.isLoggedIn()) {
  doLoginActions();
}

// Set up handler to perform login actions immediately after a successful login
bzr.onLogin(doLoginActions);
</script>
```

<Aside>
  An ellipses (`...`) indicates portions of previously added code omitted for
  brevity.
</Aside>

Now, log out and log back in and you'll see `is logged in: true` after the pop-up closes, without the need for a page refresh.

## Displaying Logged-in Content

Next, you'll display content in your template depending on a user's logged-in status.

```vue title="App.vue" ins={3,7,11,19,21,22,24} del={10}
<script setup lang="ts">
import { BazaarApp } from "@bzr/bazaar";
import { ref } from "vue";

...

const isLoggedIn = ref(false);

async function doLoginActions() {
  console.log("is logged in:", bzr.isLoggedIn());
  isLoggedIn.value = true;
}

...
</script>
<template>
  <div class="container">
    <h1>Todo</h1>
    <template v-if="!isLoggedIn">
      <button @click="bzr.login">Log in</button>
    </template>
    <template v-else>
      <button @click="bzr.logOut">Log out</button>
    </template>
  </div>
</template>
```

Now only the `Log in` button will display when logged out, and the `Log out` button will display when logged in.

## Adding a Todo

Next, you'll implement the feature to add new todo items.

In your `script`, add the following new lines:

```vue title="App.vue" ins={9-26} ins=", type Ref"
<script setup lang="ts">
import { BazaarApp, type SubscribeListener } from "@bzr/bazaar";
import { ref, type Ref } from "vue";

const bzr = new BazaarApp({ ... });

const isLoggedIn = ref(false);

type Todo = {
  id: string;
  text: string;
  completed: boolean;
}

const todoText = ref("");
const todos: Ref<Todo[]> = ref([]);

const todosCollection = bzr.collection<Todo>("todos");

async function onSubmit() {
  const unpersistedTodo = { text: todoText.value, completed: false };
  const id = await todosCollection.insertOne(unpersistedTodo);
  todos.value.push({ id, ...unpersistedTodo });

  todoText.value = "";
}

...
</script>
```

TODO explain.

And in your `template`, add the **add todo** form below the `Log out` button.

```vue title="App.vue" ins={5-13}
<template>
  ...
  <button @click="bzr.logOut">Log out</button>

  <form class="todo-form" @submit.prevent="onSubmit">
    <input
      type="text"
      v-model="todoText"
      placeholder="Write a todo..."
      required
    />
    <button>Add</button>
  </form>
  ...
</template>
```

You create a `todos` collection, and insert a todo when the form is submitted.

When submit the **add todo** form, you insert a todo to the database, get its ID, then add the todo to your local state. If you use the Vue Dev Tools you can see the `todos` state getting updated with the todo, complete with ID returned from the database. Next, you need to display todos.

## Displaying Todos

In this step, you'll display todos.

```vue title="App.vue" ins={6}
<script setup lang="ts">
...

async function doLoginActions() {
  isLoggedIn.value = true;
  todosCollection.getAll().then((docs) => (todos.value = docs));
}

...
</script>
```

Then, in the `template` display the todos after the form:

```vue title="App.vue" ins={6-12}
<template>
  ...

  <form class="todo-form" @submit.prevent="onSubmit">...</form>

  <div class="todos">
    <div class="card" v-for="todo of todos" :key="todo.id">
      <div class="todo-text">
        {{ todo.text }}
      </div>
    </div>
  </div>

  ...
</template>
```

Now, your todos appear below the form.

Notice, todos are added to the bottom of your list. Usually you want the newest todos to appear first. To do that, you'll reverse the fetched todos.

```vue title="App.vue" del={4} ins={5,6} ins="fetchedTodos.value"
<script setup lang="ts">
...

const todos: Ref<Todo[]> = ref([]);
const fetchedTodos: Ref<Todo[]> = ref([]);
const todos = computed(() => [...fetchedTodos.value].reverse());

...

async function doLoginActions() {
  isLoggedIn.value = true;
  todosCollection.getAll().then((docs) => (fetchedTodos.value = docs));
}

...
</script>
```

Next, you'll perform a small refactor to implement realtime cross-device syncing, while doing the same initial data fetch.

## Adding Realtime Syncing

Adding realtime cross-device updates requires only a small refactor. First, import the `arrayMirrorSubscribeListener` helper:

```vue title="App.vue" ins=", arrayMirrorSubscribeListener"
import { BazaarApp, arrayMirrorSubscribeListener } from "@bzr/bazaar";
```

Then, update the `onSubmit` and `doLoginActions` methods as follows:

```vue title="App.vue"
<script setup lang="ts">
...

function onSubmit() {
  const unpersistedTodo = { text: todoText.value, completed: false };
  todosCollection.insertOne(unpersistedTodo);
  todoText.value = "";
}

async function doLoginActions() {
  isLoggedIn.value = true;
  todosCollection.subscribeAll({}, arrayMirrorSubscribeListener(todos.value));
}

...
</script>
```

`subscribeAll` subscribes to all doc changes in a collection. `arrayMirrorSubscribeListener` is a utility function for working with arrays. You can write your own subscribe listener. The syntax looks like this:

```ts
import type { AnyDoc, SubscribeListener } from "@bzr/bazaar";

const mySubscribeListener: SubscribeListener<AnyDoc> = {
  onInitial: (doc) => {
    // Add doc
  },
  onAdd: (doc) => {
    // Add doc
  },
  onChange: (oldDoc, newDoc) => {
    // Update doc
  },
  onDelete: (doc) => {
    // Delete doc
  },
};

todosCollection.subscribeAll({}, mySubscribeListener)
```

The `arrayMirrorSubscribeListener` implements `onIntial` such that data from a collection is fetched and added to your local state. Essentially it's syntactic sugar for `todosCollection.getAll().then((docs) => (todos.value = docs));`.

## Toggling Todo Completion

In this step, you'll implement toggling todo completion.

```vue title="App.vue" ins={6-8}
<script setup lang="ts">
...

function onSubmit() { ... }

function toggleTodoCompletion(todo: Todo) {
  todosCollection.updateOne(todo.id, { completed: !todo.completed });
}

...
</script>
```

Then, in the `template` add the button and conditional todo text styling:

```vue title="App.vue" ins={9-11} ins=" :class="{ strikethrough: todo.completed }""
<template>
  ...

  <div class="todos">
    <div class="card" v-for="todo of todos" :key="todo.id">
      <div class="todo-text" :class="{ strikethrough: todo.completed }">
        {{ todo.text }}
      </div>
      <button @click="toggleTodoCompletion(todo)">
        Mark as {{ todo.completed ? "Incomplete" : "Completed" }}
      </button>
    </div>
  </div>

  ...
</template>
```

Now todos can be marked as **completed** and **incomplete**. Next, you'll implement todo deletion.

## Deleting a Todo

```vue title="App.vue" ins={6-9}
<script setup lang="ts">
...

function toggleTodoCompletion(todo: Todo) { ... }

function deleteTodo(id: string) {
  if (!window.confirm("Delete todo forever?")) return;
  todosCollection.deleteOne(id);
}

...
</script>
```

Then, in the `template` add the `Delete` button:

```vue title="App.vue" ins={7}
<template>
  ...

  <button @click="toggleTodoCompletion(todo)">
    Mark as {{ todo.completed ? "Incomplete" : "Completed" }}
  </button>
  <button @click="deleteTodo(todo.id)">Delete</button>

  ...
</template>
```

With that, functionality is complete.

Now you'll deploy your app to GitHub Pages.

## Deploying to Netlify

```bash
git init
git add .
git commit -m "Initial commit: Vue todo app"
```

Go to GitHub, create public repo named `vue-todo-guide`.

```bash
git remote add origin https://github.com/<your-username>/vue-todo-guide.git
git branch -M main
git push -u origin main
```

Go to Netlify, create account, click **Add new site**, then, **import an existing project**. Next, select **GitHub**. Select the organization your repo is in, if relevant, and search for your repo, `vue-todo-guide`. If you can't find your repo, click **Configure the Netlify app on GitHub** to grant access. Select your repo, choose a site name. I'm using `vue-todo-guide` and note your app's Netlify URL right below the **Site name** field. It will looks something like `https://vue-todo-guide.netlify.app`. Leave the default build settings as the defaults.

Next, click **Add environment variables**. You'll add two environment variables, `VITE_URL` and `VITE_APP_ID`. For `VITE_URL`, use your app's Netlify URL, e.g. `https://vue-todo-guide.netlify.app`. For `VITE_APP_ID`, you must register a Bazaar app.

To get your Bazaar app ID, open up [https://cloud.bzr.dev/], and create a free account. Click on the user icon, top right, then click **Developers**. Next, click **Create App**.

Give your app a name. I'm using **Vue Todo Guide**. And set your \*APP URL\*\*, which should be the same as your app's Netlify URL, e.g. `https://vue-todo-guide.netlify.app`. Finally, click **Create**, then copy your app ID. It will look something like `01907291-d4e5-79d5-a312-ba20260c9b98`.

Return to Netlify and paste in your app ID as the `VITE_APP_ID` value, and click **Deploy**. You'll see a notice, **Site deploy in progress**. The process will take a few minutes.

## Next Steps

Check docs. See other features, permissions, social.

## Resources

- NPM mock
- NPM library
- Bazaar Cloud
- Docs
